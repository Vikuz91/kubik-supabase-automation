name: Supabase Auto-refresh Blogger Data

on:
  schedule:
    # ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
    - cron: '*/5 * * * *'
  workflow_dispatch:
    # Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ñ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²
    inputs:
      test_mode:
        description: 'Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼'
        required: false
        default: 'false'
        type: choice
        options:
          - 'true'
          - 'false'
      batch_size:
        description: 'Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ°Ñ‚Ñ‡Ğ° (Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ·Ğ° Ñ€Ğ°Ğ·)'
        required: false
        default: '20'
        type: string

jobs:
  refresh-blogger-data:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“‹ ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…
        id: vars
        run: |
          echo "SUPABASE_URL=https://dvzhknjzljbkqlmcqsty.supabase.co" >> $GITHUB_ENV
          echo "SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2emhrbmp6bGpia3FsbWNxc3R5Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NDE5NjczMCwiZXhwIjoyMDU5NzcyNzMwfQ.pGog4d8F2ryFcSUIeaPzePPaQqvA-Ahl8wnbpLAIuic" >> $GITHUB_ENV
          echo "TEST_MODE=${{ github.event.inputs.test_mode || 'false' }}" >> $GITHUB_ENV
          echo "BATCH_SIZE=${{ github.event.inputs.batch_size || '20' }}" >> $GITHUB_ENV
          echo "timestamp=$(date '+%Y-%m-%d %H:%M:%S UTC')" >> $GITHUB_OUTPUT

      - name: ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ¼ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ)
        if: env.TEST_MODE == 'true'
        run: |
          echo "ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼: Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑÑ‚Ğ°Ñ‚ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ°Ğ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ..."
          
          status_response=$(curl -s -w "%{http_code}" -o status.json \
            -X POST "${{ env.SUPABASE_URL }}/functions/v1/test-auto-refresh-system" \
            -H "Authorization: Bearer ${{ env.SERVICE_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{"action": "status"}')
          
          echo "Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹: $status_response"
          
          if [ "$status_response" -eq 200 ]; then
            echo "âœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°"
            cat status.json | jq '.'
          else
            echo "âš ï¸ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼ Ğº ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
            cat status.json
          fi

      - name: ğŸ› ï¸ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ»Ğ°Ğ³Ğ¾Ğ² (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ¼ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ)
        if: env.TEST_MODE == 'true'
        run: |
          echo "ğŸ§ª Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ needs_refresh=true Ğ´Ğ»Ñ 5 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹..."
          
          set_flags_response=$(curl -s -w "%{http_code}" -o set_flags.json \
            -X POST "${{ env.SUPABASE_URL }}/functions/v1/test-auto-refresh-system" \
            -H "Authorization: Bearer ${{ env.SERVICE_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{"action": "set_flags", "limit": 5}')
          
          echo "Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ Ñ„Ğ»Ğ°Ğ³Ğ¾Ğ²: $set_flags_response"
          cat set_flags.json | jq '.'

      - name: ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ±Ğ»Ğ¾Ğ³ĞµÑ€Ğ¾Ğ²
        id: refresh
        run: |
          echo "ğŸ”„ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ±Ğ»Ğ¾Ğ³ĞµÑ€Ğ¾Ğ²..."
          echo "ğŸ“Š Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ°Ñ‚Ñ‡Ğ°: ${{ env.BATCH_SIZE }}"
          echo "â° Ğ’Ñ€ĞµĞ¼Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°: ${{ steps.vars.outputs.timestamp }}"
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ payload Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸
          if [ "${{ env.TEST_MODE }}" == "true" ]; then
            payload='{"source": "github-actions-test", "batch_size": ${{ env.BATCH_SIZE }}}'
          else
            payload='{"source": "github-actions", "batch_size": ${{ env.BATCH_SIZE }}}'
          fi
          
          # Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
          response=$(curl -s -w "%{http_code}" -o response.json \
            -X POST "${{ env.SUPABASE_URL }}/functions/v1/auto-refresh-webhook" \
            -H "Authorization: Bearer ${{ env.SERVICE_KEY }}" \
            -H "Content-Type: application/json" \
            -d "$payload")
          
          echo "HTTP Status: $response"
          echo "ğŸ“„ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ ÑĞµÑ€Ğ²ĞµÑ€Ğ°:"
          cat response.json | jq '.' || cat response.json
          
          # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
          if [ "$response" -eq 200 ]; then
            # Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
            processed=$(cat response.json | jq -r '.processed // 0')
            updated=$(cat response.json | jq -r '.updated // 0')
            needs_refresh_count=$(cat response.json | jq -r '.needs_refresh_count // 0')
            
            echo "âœ… ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
            echo "ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ:"
            echo "  - ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ: $needs_refresh_count Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹"
            echo "  - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾ Ğ² Ğ±Ğ°Ñ‚Ñ‡Ğµ: $processed Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹"
            echo "  - Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾: $updated Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹"
            
            # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ´Ğ»Ñ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ñ… ÑˆĞ°Ğ³Ğ¾Ğ²
            echo "success=true" >> $GITHUB_OUTPUT
            echo "processed=$processed" >> $GITHUB_OUTPUT
            echo "updated=$updated" >> $GITHUB_OUTPUT
            echo "needs_refresh_count=$needs_refresh_count" >> $GITHUB_OUTPUT
          else
            echo "âŒ ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¾ÑÑŒ Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¾Ğ¹ (HTTP $response)"
            echo "success=false" >> $GITHUB_OUTPUT
            echo "error_code=$response" >> $GITHUB_OUTPUT
            exit 1
          fi

      - name: ğŸ“Š Ğ¡Ğ²Ğ¾Ğ´ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
        if: always()
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "ğŸ“‹ Ğ¡Ğ’ĞĞ”ĞšĞ Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ˜Ğ¯ ĞĞ’Ğ¢ĞĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "â° Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ: ${{ steps.vars.outputs.timestamp }}"
          echo "ğŸ”§ Ğ ĞµĞ¶Ğ¸Ğ¼: ${{ env.TEST_MODE == 'true' && 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹' || 'ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹' }}"
          echo "ğŸ“¦ Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ°Ñ‚Ñ‡Ğ°: ${{ env.BATCH_SIZE }}"
          
          if [ "${{ steps.refresh.outputs.success }}" == "true" ]; then
            echo "âœ… Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ"
            echo "ğŸ” ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ: ${{ steps.refresh.outputs.needs_refresh_count }}"
            echo "âš™ï¸ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾ Ğ² Ğ±Ğ°Ñ‚Ñ‡Ğµ: ${{ steps.refresh.outputs.processed }}"
            echo "ğŸ’¾ Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾: ${{ steps.refresh.outputs.updated }}"
            
            # Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚Ğ¸
            if [ "${{ steps.refresh.outputs.processed }}" -gt 0 ]; then
              success_rate=$(echo "scale=1; ${{ steps.refresh.outputs.updated }} * 100 / ${{ steps.refresh.outputs.processed }}" | bc -l 2>/dev/null || echo "N/A")
              echo "ğŸ“ˆ ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚Ğ¸: ${success_rate}%"
            fi
          else
            echo "âŒ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ĞĞ¨Ğ˜Ğ‘ĞšĞ"
            echo "ğŸ”´ ĞšĞ¾Ğ´ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸: ${{ steps.refresh.outputs.error_code }}"
          fi
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

      - name: ğŸ“ˆ Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ¼ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ)
        if: env.TEST_MODE == 'true' && steps.refresh.outputs.success == 'true'
        run: |
          echo "ğŸ§ª ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸..."
          
          final_status=$(curl -s -w "%{http_code}" -o final_status.json \
            -X POST "${{ env.SUPABASE_URL }}/functions/v1/test-auto-refresh-system" \
            -H "Authorization: Bearer ${{ env.SERVICE_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{"action": "status"}')
          
          if [ "$final_status" -eq 200 ]; then
            echo "ğŸ“Š Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:"
            cat final_status.json | jq '.'
          fi

      - name: ğŸš¨ Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ
        if: failure()
        run: |
          echo "ğŸš¨ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯ ĞĞ¨Ğ˜Ğ‘ĞšĞ Ğ’ ĞĞ’Ğ¢ĞĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ˜!"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "â° Ğ’Ñ€ĞµĞ¼Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸: ${{ steps.vars.outputs.timestamp }}"
          echo "ğŸ”§ Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ: ${{ env.TEST_MODE == 'true' && 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹' || 'ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹' }}"
          echo "ğŸ’¥ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ°ÑÑŒ Ğ½ĞµÑƒĞ´Ğ°Ñ‡Ğ½Ğ¾"
          echo ""
          echo "ğŸ“‹ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ²Ñ‹ÑˆĞµ Ğ´Ğ»Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹"
          echo "ğŸ”§ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹:"
          echo "  - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼ Ğº Supabase"
          echo "  - ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ² Edge Functions"
          echo "  - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ API Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¼Ğ¸"
          echo "  - ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ² ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

      - name: ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ğ² (Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ)
        if: failure()
        uses: actions/upload-artifact@v3
        with:
          name: error-logs-${{ github.run_number }}
          path: |
            *.json
          retention-days: 7
